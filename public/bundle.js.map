{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://project2/./src/pollingService.js","webpack://project2/./src/services.js","webpack://project2/./src/state.js","webpack://project2/./src/view.js","webpack://project2/webpack/bootstrap","webpack://project2/webpack/runtime/define property getters","webpack://project2/webpack/runtime/hasOwnProperty shorthand","webpack://project2/webpack/runtime/make namespace object","webpack://project2/./src/index.js"],"sourcesContent":["let intervalUser, intervalMsg;\n\n// Function to start polling users\nexport function startPollingUsers(fetchFunction, interval = 5000) {\n    stopPollingUsers();\n    intervalUser = setInterval(fetchFunction, interval);\n}\n\n// Function to stop polling users\nexport function stopPollingUsers() {\n    if (intervalUser) clearInterval(intervalUser);\n}\n\n// Function to start polling messages\nexport function startPollingMessages(fetchFunction, interval = 5000) {\n    stopPollingMessages();\n    intervalMsg = setInterval(fetchFunction, interval);\n}\n\n// Function to stop polling messages\nexport function stopPollingMessages() {\n    if (intervalMsg) clearInterval(intervalMsg);\n}","// Function to make a fetch request\nfunction makeFetchRequest(url, options) {\n  return fetch(url, options)\n    .then(response => {\n      if (!response.ok) {\n        return response.json().then(error => Promise.reject(error),\n          () => Promise.reject({\n            error: 'bad-response'\n          }));\n      }\n      return response.json().catch(() => Promise.reject({\n        error: 'bad-json'\n      }));\n    })\n    .catch(error => {\n      if (error.error) {\n        return Promise.reject(error);\n      }\n      return Promise.reject({\n        error: 'network-error'\n      });\n    });\n}\n\n// Function to perform user login\nexport function userLogin(username) {\n  return makeFetchRequest('/api/session/', {\n    method: 'POST',\n    headers: {\n      'content-type': 'application/json'\n    },\n    body: JSON.stringify({\n      username\n    }),\n  });\n}\n\n// Function to retrieve session data\nexport function getSession() {\n  return makeFetchRequest('/api/session/', {\n    method: 'GET',\n    headers: {\n      'content-type': 'application/json'\n    },\n  });\n}\n\n// Function to retrieve user data\nexport function getUsers() {\n  return makeFetchRequest('/api/users/', {\n    method: 'GET',\n    headers: {\n      'content-type': 'application/json'\n    },\n  });\n}\n\n// Function to retrieve messages\nexport function getMessages() {\n  return makeFetchRequest('/api/message/', {\n    method: 'GET',\n    headers: {\n      'content-type': 'application/json'\n    },\n  });\n}\n\n// Function to post a new message\nexport function postMessages(msg, imagePath) {\n  return makeFetchRequest('/api/message/', {\n    method: 'POST',\n    headers: {\n      'content-type': 'application/json'\n    },\n    body: JSON.stringify({\n      msg,\n      imagePath\n    }),\n  });\n}\n\n// Function to perform user logout\nexport function logout() {\n  return makeFetchRequest('/api/session/', {\n    method: 'DELETE',\n    headers: {\n      'content-type': 'application/json'\n    },\n  });\n}","// Initial state object containing session data and user list\nlet state = {\n    sessionData: {\n        username: null,\n        image: null,\n    },\n    users: []\n};\n\n// Function to set session data in the state\nexport function setSessionData(user) {\n    state.sessionData.username = user.username;\n    state.sessionData.image = user.image;\n}\n\n// Function to retrieve session data from the state\nexport function getSessionData() {\n    return state.sessionData;\n}\n\n// Function to set user data in the state\nexport function setUsersData(users) {\n    state.users = users;\n}\n\n// Function to retrieve user data from the state\nexport function getUsersData() {\n    return state.users;\n}","export function renderLogin(rootEl) {\r\n  rootEl.innerHTML = `\r\n    <header class=\"page-header\"><h2>Welcome!</h2></header>\r\n    <main class=\"main\">\r\n      <div class=\"login-panel\">\r\n        <p class=\"login-text\">Please Login!</p>\r\n        <div class=\"login-form\">\r\n          <label>\r\n              Username:\r\n              <input class=\"login-input\" type=\"text\" name=\"username\"  placeholder=\"Enter your username\" required>\r\n          </label>\r\n          <button class=\"login-button\">\r\n            Login\r\n          </button>\r\n          <span class=\"login-msg\"></span>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  `\r\n}\r\n\r\nexport function renderHome(rootEl, user) {\r\n  rootEl.innerHTML = `\r\n    <header class=\"page-header\">\r\n      <h2>\r\n        Welcome ${user.username}!\r\n      </h2>\r\n      <button class=\"logout-button\">\r\n        Logout\r\n      </button>\r\n    </header>\r\n    <main class=\"main\">\r\n      <div class=\"chat\">\r\n        <div class=\"users\">\r\n            <ul class=\"user-list\">\r\n            </ul>\r\n            <div class=\"user-loading\">\r\n          </div>\r\n        </div>\r\n        <div class=\"message\">\r\n          <div class=\"chat-header\">\r\n            <img src=\"./images/logo.png\" alt=\"We Talk Logo\" class=\"chat-logo\"/> \r\n              WeTalk!\r\n            </div>\r\n            <ul class=\"msg-list\"></ul>\r\n            <div class=\"msg-input\">\r\n                <input class=\"input-msg\" placeholder=\"Enter your message\"/>\r\n                <button class=\"send-msg\">\r\n                  Send\r\n                </button>\r\n            </div>\r\n            <div class=\"msg-loading\">\r\n            </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  `\r\n}\r\n\r\n\r\nexport function renderUserList(users) {\r\n  const userList = document.querySelector('.user-list');\r\n  userList.innerHTML = users.map(user => {\r\n    const imagePath = user.image;\r\n    const onlineDot = user.isOnline ? '<span class=\"online-dot\"></span>' : '';\r\n\r\n    return `\r\n      <li class=\"user-list-item ${user.isOnline ? 'user-online' : ''}\">\r\n        <img src=\"${imagePath}\" alt=\"User image\" class=\"user-image\"/>\r\n        <div class=\"user-info\">\r\n        <span class=\"user-name\">\r\n          ${user.username}\r\n        </span>\r\n        <span class=\"online-dot\"></span>\r\n        </div>\r\n      </li>\r\n    `;\r\n  }).join(\"\");\r\n}\r\n\r\nexport function renderMsgList(messages) {\r\n  const msgList = document.querySelector('.msg-list');\r\n\r\n  msgList.innerHTML = messages.map((message) => {\r\n    return `\r\n    <li class=\"msg-list-item\">\r\n        <div class=\"msg-header\">\r\n        <img src=\"${message.imagePath}\" alt=\"Avatar\" class=\"user-avatar\">\r\n            <p class=\"msg-user\">\r\n              ${message.username}\r\n            </p>\r\n            <span class=\"msg-time\">\r\n              ${message.time}\r\n            </span>\r\n        </div>\r\n        <p class=\"msg-text\">\r\n          ${message.message.replace(/</g, '&lt;').replace(/>/g, '&gt;')}\r\n        </p>\r\n    </li>\r\n    `;\r\n  }).join(\"\");\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import {\r\n  userLogin,\r\n  getUsers,\r\n  getSession,\r\n  getMessages,\r\n  postMessages,\r\n  logout\r\n} from './services';\r\nimport {\r\n  renderLogin,\r\n  renderUserList,\r\n  renderHome,\r\n  renderMsgList\r\n} from './view';\r\nimport {\r\n  startPollingUsers,\r\n  startPollingMessages\r\n}\r\nfrom './pollingService';\r\nimport {\r\n  getSessionData,\r\n  setSessionData,\r\n  setUsersData,\r\n  getUsersData\r\n} from './state';\r\n\r\n\r\nconst rootEl = document.querySelector('#container');\r\nconst loading = document.querySelector('.loading');\r\n\r\n// Initialize the application\r\nfunction initializeApp() {\r\n  rootEl.addEventListener('click', handleRootClick);\r\n  checkUserSession();\r\n}\r\n\r\n// Event handler for root clicks\r\nfunction handleRootClick(e) {\r\n  if (e.target.classList.contains('login-button')) {\r\n    const username = document.querySelector('.login-input').value;\r\n    getUserLogin(username);\r\n  } else if (e.target.classList.contains('logout-button')) {\r\n    getLogout();\r\n  } else if (e.target.classList.contains('send-msg')) {\r\n    sendMessages();\r\n  }\r\n}\r\n\r\n// Handle login logic\r\nfunction getUserLogin(username) {\r\n  userLogin(username)\r\n    .then(res => {\r\n      document.querySelector('.login-msg').innerText = '';\r\n      welcomeHome(res);\r\n    })\r\n    .catch(error => {\r\n      document.querySelector('.login-msg').innerText = error.error;\r\n    });\r\n}\r\n\r\n// Handle logout logic\r\nfunction getLogout() {\r\n  logout().then(() => renderLogin(rootEl));\r\n}\r\n\r\n// Send message\r\nfunction sendMessages() {\r\n  const inputEl = document.querySelector('.input-msg');\r\n  const msg = inputEl.value;\r\n  if (!msg) return;\r\n  const {\r\n    imagePath\r\n  } = getSessionData();\r\n  postMessages(msg, imagePath).then(() => {\r\n    inputEl.value = '';\r\n    getAllMessages(true);\r\n    restartIntervalForMessages();\r\n  });\r\n}\r\n\r\n// user home after successful login\r\nfunction welcomeHome(user) {\r\n  setSessionData(user);\r\n  renderHome(rootEl, getSessionData());\r\n  fetchInitialData();\r\n  addEnterKeySendEvent();\r\n}\r\n\r\n// / Add event listener for sending messages on \"Enter\" key press\r\nfunction addEnterKeySendEvent() {\r\n  const inputMsg = document.querySelector('.input-msg');\r\n  const sendMsgButton = document.querySelector('.send-msg');\r\n\r\n  if (inputMsg && sendMsgButton) {\r\n    inputMsg.addEventListener('keypress', function (e) {\r\n      if (e.key === 'Enter') {\r\n        e.preventDefault();\r\n        sendMessages();\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n// Fetch initial data for users and messages\r\nfunction fetchInitialData() {\r\n  getAllUsers();\r\n  getAllMessages(true);\r\n  restartIntervalForUsers();\r\n  restartIntervalForMessages();\r\n}\r\n\r\n// Retrieve all users\r\nfunction getAllUsers() {\r\n  toggleLoading('.user-loading', true);\r\n  getUsers().then(res => {\r\n    setUsersData(res.users);\r\n    renderUserList(getUsersData());\r\n  }).finally(() => toggleLoading('.user-loading', false));\r\n}\r\n\r\n// Retrieve all messages\r\nfunction getAllMessages(scroll) {\r\n  toggleLoading('.msg-loading', true);\r\n  getMessages().then(res => {\r\n    renderMsgList(res.msgList, getUsersData());\r\n    if (scroll) scrollToBottom(document.querySelector('.msg-list'));\r\n  }).finally(() => toggleLoading('.msg-loading', false));\r\n}\r\n\r\n// Toggle loading indicator\r\nfunction toggleLoading(selector, show) {\r\n  const element = document.querySelector(selector);\r\n  element.hidden = !show;\r\n}\r\n\r\n// Restart polling for users\r\nfunction restartIntervalForUsers() {\r\n  startPollingUsers(getAllUsers);\r\n}\r\n\r\n// Restart polling for messages\r\nfunction restartIntervalForMessages() {\r\n  startPollingMessages(() => getAllMessages(false));\r\n}\r\n\r\n// Scroll to the bottom of a target element\r\nfunction scrollToBottom(target) {\r\n  target.scrollTop = target.scrollHeight;\r\n}\r\n\r\n// Check user session\r\nfunction checkUserSession() {\r\n  getSession()\r\n    .then(res => {\r\n      setSessionData(res);\r\n      welcomeHome(res);\r\n    })\r\n    .catch(() => {\r\n      renderLogin(rootEl);\r\n    })\r\n    .finally(() => {\r\n      document.querySelector('.loading').hidden = true;\r\n    });\r\n}\r\n\r\n// Start the application\r\ninitializeApp();"],"names":["intervalUser","intervalMsg","startPollingUsers","fetchFunction","interval","arguments","length","undefined","stopPollingUsers","setInterval","clearInterval","startPollingMessages","stopPollingMessages","makeFetchRequest","url","options","fetch","then","response","ok","json","error","Promise","reject","userLogin","username","method","headers","body","JSON","stringify","getSession","getUsers","getMessages","postMessages","msg","imagePath","logout","state","sessionData","image","users","setSessionData","user","getSessionData","setUsersData","getUsersData","renderLogin","rootEl","innerHTML","renderHome","concat","renderUserList","userList","document","querySelector","map","onlineDot","isOnline","join","renderMsgList","messages","msgList","message","time","replace","loading","initializeApp","addEventListener","handleRootClick","checkUserSession","e","target","classList","contains","value","getUserLogin","getLogout","sendMessages","res","innerText","welcomeHome","inputEl","_getSessionData","getAllMessages","restartIntervalForMessages","fetchInitialData","addEnterKeySendEvent","inputMsg","sendMsgButton","key","preventDefault","getAllUsers","restartIntervalForUsers","toggleLoading","scroll","scrollToBottom","selector","show","element","hidden","scrollTop","scrollHeight"],"sourceRoot":""}